{% extends "layout/index.html" %} {% block title %}Inventory{% endblock title %}
{% block body %}
<div class="h-full w-full">
  <div class="text-2xl text-center py-4">Inventory</div>

  <div class=" ">
    <div
      class="max-w-5xl mx-3 relative overflow-x-auto items-center shadow-md sm:rounded-lg"
    >
      <table
        class="w-full text-sm text-left rtl:text-right text-white dark:text-white"
      >
        <thead
          class="text-xs text-white uppercase bg-gray-50 dark:bg-gray-700 dark:text-white"
        >
          <tr>
            <th scope="col" class="px-4 py-3">Sr. No.</th>
            <th scope="col" class="px-6 py-3">Product name</th>
            <th scope="col" class="px-6 py-3">Quantity</th>
            <th scope="col" class="px-6 py-3">Price</th>

            <th scope="col" class="px-6 py-3 pr-2 text-center">
              <button id="openModel" class="btn min-h-8 h-8 text-white">
                Add
              </button>
            </th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr
            class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 hover: text-white dark:hover:bg-gray-900"
          >
            <td class="px-4 py-4">{{forloop.counter}}</td>
            <th
              scope="row"
              class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"
            >
              {{item.name}}
            </th>
            <td class="px-6 py-4">{{item.quantity }} kg</td>
            <td class="px-6 py-4">{{item.price}}</td>

            <td class="px-6 py-4 text-center pr-2">
              <a
                href="#"
                class="font-medium text-blue-600 dark:text-blue-500 hover:underline"
                >Edit</a
              >
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div
    id="myModal"
    class="fixed inset-0 z-50 hidden bg-black bg-opacity-50 overflow-auto"
  >
    <div class="flex items-center justify-center h-full">
      <div class="bg-white rounded-lg shadow-lg w-11/12 md:w-1/3">
        <div class="p-6">
          <h2 class="text-lg font-semibold mb-4">Add New Item</h2>
          <span class="close absolute p-2 text-gray-500 cursor-pointer"
            >&times;</span
          >
          <form method="POST" action="{% url 'add_item' %}">
            {% csrf_token %} {{ form.as_p }}
            <button
              type="submit"
              class="btn bg-blue-500 text-white px-4 py-2 rounded"
            >
              Add Item
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Get the modal
    var modal = document.getElementById("myModal");

    // Get the button that opens the modal
    var btn = document.getElementById("openModal");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks the button, open the modal
    btn.onclick = function () {
      modal.classList.remove("hidden");
    };

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
      modal.classList.add("hidden");
    };

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
      if (event.target == modal) {
        modal.classList.add("hidden");
      }
    };
  </script>
</div>
{% endblock %}
